(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{24:function(e,t,r){},39:function(e,t,r){"use strict";r.r(t);var c,n,a=r(16),s=r.n(a),o=r(4),l=(r(24),r(2)),i=(r(25),r(0)),j=function(){return Object(i.jsx)("h1",{children:"Home Page"})},b=r(10),u=r(19),h=r(5),d=r(6),O=r(1),m=r.n(O),p=r(17),x=r.n(p);!function(e){e.Name="name",e.Sex="sex",e.Born="born",e.Died="died"}(c||(c={})),function(e){e.asc="asc",e.desc="desc"}(n||(n={}));var f=r(18),v=r(12),g=r.n(v),N="".concat("https://mate-academy.github.io","/react_people-table/api/people.json");function y(){return(y=Object(f.a)(g.a.mark((function e(){var t,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(N);case 2:if((t=e.sent).ok){e.next=6;break}throw r=t.status,c=t.statusText,new Error("".concat(r," - ").concat(c));case 6:return e.abrupt("return",t.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=r(9),w=r.n(k),C=function(e){var t=e.name,r=e.personSlug,c=Object(l.f)().search;return Object(i.jsx)(o.b,{to:{pathname:"/people/".concat(r),search:c},style:{color:"inherit"},children:t})};function _(e){return"m"===e?"rgb(0, 71, 171)":"rgb(255, 0, 0)"}var P=m.a.memo((function(e){var t=e.person,r=Object(l.h)().personSlug;return Object(i.jsxs)("tr",{className:w()("Person"),style:r===t.slug?{backgroundColor:"green"}:{},children:[Object(i.jsx)("th",{style:{color:_(t.sex)},children:Object(i.jsx)(C,{name:t.name,personSlug:t.slug})}),Object(i.jsx)("th",{children:t.sex}),Object(i.jsx)("th",{children:t.born}),Object(i.jsx)("th",{children:t.died}),Object(i.jsx)("th",{style:{color:t.mother?_(t.mother.sex):"black"},children:t.mother?Object(i.jsx)(C,{name:t.mother.name,personSlug:t.mother.slug}):Object(i.jsx)("b",{children:t.motherName})}),Object(i.jsx)("th",{style:{color:t.father?_(t.father.sex):"black"},children:t.father?Object(i.jsx)(C,{name:t.father.name,personSlug:t.father.slug}):Object(i.jsx)("b",{children:t.fatherName})})]},t.name)})),S=m.a.memo((function(e){var t=e.people,r=e.sortPeople,a=[c.Name,c.Sex,c.Born,c.Died],s=Object(l.f)().search,o=new URLSearchParams(s),j=o.get("sortBy"),b=o.get("sortOrder"),u=Object(O.useCallback)((function(e){return e===j}),[j]);return Object(i.jsxs)("table",{className:"PeopleTable table",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[a.map((function(e){return Object(i.jsxs)("th",{className:" PeopleTable__column-title PeopleTable__column-title--sortable",onClick:function(){return r(e)},children:[e,u(e)?Object(i.jsx)("img",{src:"images/sort_".concat(Object.values(n).includes(b)?b:"both",".png"),alt:"sort ".concat(b||"both")}):Object(i.jsx)("img",{src:"images/sort_both.png",alt:"sort both"})]},e)})),Object(i.jsx)("th",{className:"PeopleTable__column-title",children:"Mother"}),Object(i.jsx)("th",{className:"PeopleTable__column-title",children:"Father"})]})}),Object(i.jsx)("tbody",{children:t.map((function(e){return Object(i.jsx)(P,{person:e},e.slug)}))})]})}));var B=function(e,t){return e.localeCompare(t)},L=function(){var e,t=Object(o.d)(),r=Object(h.a)(t,2),a=r[0],s=r[1],l=(null===(e=a.get("query"))||void 0===e?void 0:e.toLowerCase())||"",j=a.get("sortBy")||"",m=a.get("sortOrder")||"",p=Object(O.useState)({query:l,sortBy:j,sortOrder:m}),f=Object(h.a)(p,2),v=f[0],g=f[1],N=Object(O.useState)([]),k=Object(h.a)(N,2),w=k[0],C=k[1];Object(O.useEffect)((function(){(function(){return y.apply(this,arguments)})().then((function(e){return C(function(e){return e.map((function(t){var r=t.motherName,c=t.fatherName;return Object(d.a)(Object(d.a)({},t),{},{mother:e.find((function(e){return r===e.name})),father:e.find((function(e){return c===e.name}))})}))}(e))}))}),[]);var _=w.filter((function(e){var t,r;return e.name.toLowerCase().includes(l)||(null===(t=e.motherName)||void 0===t?void 0:t.toLowerCase().includes(l))||(null===(r=e.fatherName)||void 0===r?void 0:r.toLowerCase().includes(l))})),P=Object(O.useCallback)((function(){return j?Object(u.a)(_).sort((function(e,t){switch(j){case c.Name:case c.Sex:return m===n.asc?B(e[j],t[j]):B(t[j],e[j]);case c.Born:case c.Died:return m===n.asc?e[j]-t[j]:t[j]-e[j];default:return 0}})):_}),[_,j,m]),L=Object(O.useCallback)((function(e){Object.entries(e).forEach((function(e){var t=Object(h.a)(e,2),r=t[0],c=t[1];return c?a.set(r,c):a.delete(r)})),s(a)}),[]),T=Object(O.useCallback)(x()((function(e){L(e)}),500),[]),F=Object(O.useCallback)((function(e){var t=Object(d.a)(Object(d.a)({},v),{},{sortBy:e.toLowerCase()});if(e!==v.sortBy)t.sortOrder=n.asc;else switch(v.sortOrder){case n.asc:t.sortOrder=n.desc;break;case n.desc:t.sortOrder=n.asc;break;default:t.sortOrder=""}g(t),L(t)}),[v]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:"People page"}),Object(i.jsxs)("div",{className:"name-filters",children:[Object(i.jsx)("h2",{children:"Filter by: "}),Object(i.jsx)("input",{className:"input is-normal","data-cy":"filterInput",name:"query",placeholder:"Person Name",value:v.query,onChange:function(e){var t=e.target,r=t.name,c=t.value,n=void 0===c?"":c,a=Object(d.a)(Object(d.a)({},v),{},Object(b.a)({},r,n.toLowerCase()));g(a),T(a)}})]}),w.length?Object(i.jsx)(S,{sortPeople:F,people:P()}):Object(i.jsx)("h1",{children:"There is nobody :/"})]})},T=function(){return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("nav",{className:"navbar",children:Object(i.jsxs)("div",{className:"navbar-brand",children:[Object(i.jsx)(o.c,{to:"/",className:function(e){var t=e.isActive;return w()("navbar-item","is-tab",{"is-active":t})},children:"Home"}),Object(i.jsx)(o.c,{to:"/people",className:function(e){var t=e.isActive;return w()("navbar-item","is-tab",{"is-active":t})},children:"People"})]})})})},F=function(){return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(T,{}),Object(i.jsx)("div",{className:"App__main",children:Object(i.jsxs)(l.d,{children:[Object(i.jsx)(l.b,{path:"/people/",element:Object(i.jsx)(L,{}),children:Object(i.jsx)(l.b,{path:":personSlug",element:Object(i.jsx)(L,{})})}),Object(i.jsx)(l.b,{path:"/",element:Object(i.jsx)(j,{})}),Object(i.jsx)(l.b,{path:"/home",element:Object(i.jsx)(l.a,{to:"/"})}),Object(i.jsx)(l.b,{path:"*",element:Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("h1",{children:"Page not found"})})})]})})]})})};s.a.render(Object(i.jsx)(o.a,{children:Object(i.jsx)(F,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.e4a92a2c.chunk.js.map